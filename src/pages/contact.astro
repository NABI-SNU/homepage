---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';

const metadata = {
  title: 'Contact',
};
---

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->

  <HeroText tagline="Contact" title="Let's Connect!" />

  <ContactUs
    id="form"
    title="Drop us a message today!"
    inputs={[
      {
        type: 'text',
        name: 'name',
        label: 'Name',
      },
      {
        type: 'text',
        name: 'subject',
        label: 'Subject',
      },
    ]}
    textarea={{
      label: 'Message',
    }}
    disclaimer={{
      label:
        'By submitting this contact form, you acknowledge and agree to the collection of your personal information.',
    }}
    description="Our team typically responds within 24 business hours."
  />

  <!-- Features2 Widget ************** -->

  <Features2
    title="We are here to help!"
    items={[
      {
        title: 'General support',
        description: `Contact us for inquiries related to NABI activties, membership, and other general questions.`,
      },
      {
        title: 'Email',
        description: 'nabi.members@gmail.com',
        icon: 'tabler:mail',
      },
      {
        title: 'Location',
        description: '101 Daehak-ro, Jongno District, Seoul',
        icon: 'tabler:map-pin',
      },
    ]}
  />

  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      const formSection = document.querySelector('#form');
      const form = formSection?.querySelector('form');
      if (!form) return;

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const textarea = form.querySelector('textarea[name="message"]');
        const nameInput = form.querySelector('input[name="name"]');
        const subjectInput = form.querySelector('input[name="subject"]');
        const message = textarea?.value || '';
        const name = nameInput?.value || '';
        const subject = subjectInput?.value || '';
        const body = encodeURIComponent(
          `Name: ${name}\nSubject: ${subject}\nMessage: ${message}`
        );
        window.location.href = `mailto:nabi.members@gmail.com?subject=${subject}&body=${body}`;
      });
    });
  </script>
  
</Layout>
